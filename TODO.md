# HexSBM — Планы и улучшения

## Часть 1: Подготовка к релизу

### 1. Улучшение UI и визуального оформления
- Уменьшить высоту полей ввода (примерно в 2 раза).
- Добавить визуальную рамку или подсветку при редактировании.
- Заменить ToggleField на визуальный переключатель (чекбокс или свитч).
- Улучшить внешний вид CycleField (стрелки, выпадающий список и т.п.).
- Переместить блок "Сброс" в самый низ панели.
- Изменить порядок секций:
  1. Поведение,
  2. Размеры и позиции,
  3. Цвет и внешний вид.
- Добавить визуальные разделители между блоками.
- Сделать кнопки визуально узнаваемыми (ховер, закругления, тени).

### 2. Добавление заглушек
- В интерфейсе добавить:
  - CycleField "Режим подсветки" с опциями "По заклинанию", "Всегда", помеченный как `[В РАЗРАБОТКЕ]`.
  - В текущей версии в интерфейсе рядом с полем "A" добавить пометку: `A (не работает)` или `[В РАЗРАБОТКЕ]`.
- Эти элементы должны быть **видимы**, но **не функциональны**.

### 3. Локализация
- Заменить все `Text.literal("...")` на `Text.translatable("key")`.
- Создать файлы:
  - `assets/hexsbm/lang/en_us.json`
  - `assets/hexsbm/lang/ru_ru.json`
  - `assets/hexsbm/lang/zh_cn.json`

### 4. Чистка кода
- Удалить мёртвый код.
- Устранить дублирование.
- Упростить сложные методы.
- Привести стиль к единому виду.
- Обеспечить Single Responsibility для каждого файла.

---

## Часть 2: Дальнейшая разработка (после релиза)

### 1. Нереализованные функции
- Режим подсветки секторов:
  - В режиме "По заклинанию" подсвечивать только секторы, содержащие заклинания, и их группы.
  - В режиме "Всегда" подсвечивать все секторы.
  - Опция "Никогда" — решить, удалять или оставить.
- Режим выбора по зажатию:
  - При отпускании клавиши выбирать заклинание, находящееся под курсором.
  - Сохранить выбор по клику как альтернативу.

### 2. Баги и улучшения
- В NumberField: при прокрутке колёсиком, если поле в состоянии редактирования, применять значение из буфера перед изменением.
- Реализовать копирование/вставку через правую кнопку мыши (поведение как в терминале).
- Запретить выделение текста внутри NumberField (или сделать его не влияющим на ввод).
- Улучшить поведение CycleField и ToggleField: сделать их интуитивно понятными.
- Устранить визуальную "кашу" в ConfigPanel: усилить визуальное разделение секций.
- **ARGB-настройки**: канал **A (прозрачность) не влияет на итоговый цвет**, так как перекрывается логикой градиента и прозрачностью из `activeAlpha`/`hoverAlpha`/`inactiveAlpha`.  
  → Требуется переработка системы цвета, чтобы `A` управлял общей прозрачностью.
  → В целом много проблем с управлением градиентом и прозрачностью (они связаны).

### 3. Производительность и архитектура
- Оптимизировать перерисовку: не пересоздавать `ColorScheme` каждый кадр, если цвет не изменился.
- Рассмотреть возможность кэширования пигментов (если это даст выигрыш).
- Уточнить, что значит "привязка цвета к активному заклинанию", и реализовать, если это необходимо.